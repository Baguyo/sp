<ion-header>
  <ion-toolbar>
    <ion-title class="ion-text-center">Change Location</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">

  <ion-segment value="municipality" mode="ios" (ionChange)="changeType($event)">
    <ion-segment-button value="municipality">
      <ion-label>Change Municipality</ion-label>
    </ion-segment-button>
    <ion-segment-button value="province">
      <ion-label>Change Province</ion-label>
    </ion-segment-button>
  </ion-segment>

  <swiper-container #locationSlide>
    <swiper-slide>

      <ion-list>
        <ion-item>
          <ion-label>
            Select City / Municipality
          </ion-label>
          <ion-select (ionChange)="handleChangeStoredMunicipality($event)" placeholder="ex. Puerto Princesa City"
            (ionChange)="handleMunicipalityChange($event)">

            <ng-container *ngIf="storedMunicipalities?.length > 0">
              <ion-select-option *ngFor="let municipality of storedMunicipalities" value="{{municipality.id}}">
                {{municipality.municipality_name}}
              </ion-select-option>
            </ng-container>

          </ion-select>
        </ion-item>
      </ion-list>

      <ion-button expand="block" shape="round" color="primary" class="submit-btn ion-margin-top"
        (click)="changeMunicipality()" disabled="{{!storedMunicipalityId}}">
        Submit
      </ion-button>
    </swiper-slide>

    <swiper-slide>
      <!-- PROVINCE -->
      <ion-item>
    <ion-label>Province</ion-label>
    <ion-select placeholder="ex. Palawan" (ionChange)="handleProvinceChange($event)" disabled="{{!isConnected}}">

      <ion-select-option *ngFor="let province of provinces" value="{{province.id}}">
        {{province.province_name}}
      </ion-select-option>

    </ion-select>
  </ion-item>

      <!-- CITY/MUNICIPALITY -->
      <ion-item>
    <ion-label>
      {{municipalities?.length > 0 ? 'Select City / Municipality': municipalities?.length === 0 ? 'No Municipalities data for selected Province' : 'Select City / Municipality'}}"
    </ion-label>
    <ion-select disabled="{{municipalities?.length > 0 ? false: true }}"
      placeholder="{{municipalities?.length > 0 ? 'ex. Puerto Princesa City': municipalities?.length === 0 ? '' : 'ex. Puerto Princesa City'}}"
      (ionChange)="handleMunicipalityChange($event)">

      <ng-container *ngIf="municipalities?.length > 0">
        <ion-select-option *ngFor="let municipality of municipalities" value="{{municipality.id}}">
          {{municipality.municipality_name}}
        </ion-select-option>
      </ng-container>

    </ion-select>
  </ion-item>

      <ion-button expand="block" shape="round" color="primary" class="submit-btn ion-margin-top"
        (click)="handleDataChange()" disabled="{{municipalityId && provinceId ?  false : true}}">
        SUBMIT
      </ion-button>
    </swiper-slide>


  </swiper-container>

  <!-- PROVINCE -->
  <!-- <ion-item>
    <ion-label>PROVINCE</ion-label>
    <ion-select placeholder="ex. Palawan" (ionChange)="handleProvinceChange($event)" disabled="{{!isConnected}}">

      <ion-select-option *ngFor="let province of provinces" value="{{province.id}}">
        {{province.province_name}}
      </ion-select-option>

    </ion-select>
  </ion-item> -->

  <!-- CITY/MUNICIPALITY -->
  <!-- <ion-item>
    <ion-label>
      {{municipalities?.length > 0 ? 'Select City / Municipality': municipalities?.length === 0 ? 'No Municipalities data for selected Province' : 'Select City / Municipality'}}"
    </ion-label>
    <ion-select disabled="{{municipalities?.length > 0 ? false: true }}"
      placeholder="{{municipalities?.length > 0 ? 'ex. Puerto Princesa City': municipalities?.length === 0 ? '' : 'ex. Puerto Princesa City'}}"
      (ionChange)="handleMunicipalityChange($event)">

      <ng-container *ngIf="municipalities?.length > 0">
        <ion-select-option *ngFor="let municipality of municipalities" value="{{municipality.id}}">
          {{municipality.municipality_name}}
        </ion-select-option>
      </ng-container>

    </ion-select>
  </ion-item> -->

  <!-- <ion-button expand="block"  shape="round" color="primary" class="submit-btn ion-margin-top" (click)="handleDataChange()">
    SUBMIT
  </ion-button> -->

</ion-content>